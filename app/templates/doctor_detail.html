<!-- Thay vì gọi trực tiếp hàm DAO, hãy truyền appointments từ controller -->
{% for appointment in appointments %}
<tr>
  <td>{{ appointment.appointment_time.strftime("%d/%m/%Y %H:%M") }}</td>
  <td>
    {{ appointment.doctor.user.first_name }} {{ appointment.doctor.user.last_name }}
  </td>
  <td>
    {% if appointment.status.name == "Scheduled" %}
      <span class="status-badge status-scheduled">Đã đặt lịch</span>
    {% elif appointment.status.name == "Completed" %}
      <span class="status-badge status-completed">Đã hoàn thành</span>
    {% else %}
      <span class="status-badge status-cancelled">Đã hủy</span>
    {% endif %}
  </td>
  <td class="text-center">
    <a href="{{ url_for('appointment_detail', appointment_id=appointment.appointment_id) }}"
       class="btn btn-sm btn-primary">
      <i class="fas fa-eye me-1"></i>Chi tiết
    </a>
  </td>
</tr>
{% endfor %}