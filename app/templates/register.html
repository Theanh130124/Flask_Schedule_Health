{% extends "layout/base_login.html" %}

{% block additional_css %}
<!-- CSS riêng cho register -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/register.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="header">
        <a href="#">
            <i class="fa-solid fa-language"></i>
            English
        </a>
        <h2 class="mt-4 mb-4">ĐĂNG KÝ</h2>
    </div>

    <form method="post" action="/register">
        {{ form.csrf_token }}

        <!-- Username -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Tên đăng nhập</label>
            {{ form.username(class="form-control border-info") }}
            {% for error in form.username.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Email -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Email</label>
            {{ form.email(class="form-control border-info") }}
            {% for error in form.email.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Password -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Mật khẩu</label>
            {{ form.password(class="form-control border-info") }}
            {% for error in form.password.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Confirm Password -->
        <div class="form-floating mt-3 mb-3">
            <label class="form-label">Xác nhận mật khẩu</label>
            {{ form.confirm_password(class="form-control border-info") }}
            {% for error in form.confirm_password.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- First name -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Họ</label>
            {{ form.first_name(class="form-control border-info") }}
            {% for error in form.first_name.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Last name -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Tên</label>
            {{ form.last_name(class="form-control border-info") }}
            {% for error in form.last_name.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Phone number -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Số điện thoại</label>
            {{ form.phone_number(class="form-control border-info") }}
            {% for error in form.phone_number.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Address -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Địa chỉ</label>
            {{ form.address(class="form-control border-info") }}
            {% for error in form.address.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Date of Birth -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Ngày sinh</label>
            {{ form.date_of_birth(class="form-control border-info", type="date") }}
            {% for error in form.date_of_birth.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <!-- Gender -->
        <div class="form-floating mt-3 mb-2">
            <label class="form-label">Giới tính</label>
            {{ form.gender(class="form-select border-info") }}
            {% for error in form.gender.errors %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
        </div>

        <p class="text-warning" id="warning-caps-lock" hidden="hidden">
            <i class="fa-solid fa-circle-exclamation"></i> Bạn đang bật Caps lock
        </p>

        {% if mse %}
        <p class="text-danger">{{ mse }}</p>
        {% endif %}

        <button type="submit" class="btn btn-success w-100">
            {{ form.submit.label }}
        </button>
    </form>

    <div class="footer mt-4">
        <hr>
        <p>Bạn đã có tài khoản? <a href="{{ url_for('login') }}">Đăng nhập ngay</a></p>
    </div>

    <script>
        const pwInput = document.getElementById("password")
        const labelWarning = document.getElementById("warning-caps-lock")
        pwInput.addEventListener('keyup',(event)=>{
            if(event.getModifierState("CapsLock"))
                labelWarning.removeAttribute("hidden");
            else
                labelWarning.setAttribute("hidden", "hidden");
        })
    </script>
</div>
{% endblock %}
